{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "A representation of an environment - physical, virtual, or container.",
    "type": "object",
    "properties": {
        "type": {
            "enum": [ "physical", "virtual", "container" ],
            "default": "virtual"
        },
        "os": {
            "enum": [ "windows", "unix" ],
            "default": "unix"
        },
        "address": {
            "$ref": "#definitions/address"
        },
        "nickname": {
            "type": "string",
            "description": "A nickname identifying this environment. Nicknames can be used as referents for defining the hierarchical relationship between an environment and its contents, but not for real network/addressable relationships. Need not correspond to any real state. Nicknames co-exist in a global namespace for all environments known to any pipeviz instance, so pick them wisely."
        },
        "provider": {
            "type": "string"
        },
        "logic-states": {
            "type": "object",
            "patternProperties": {
                "^(/[^/]+)+$": { "$ref": "#definitions/logicState" }
            }
        },
        "processes": {
            "type": "array",
            "minItems": 1,
            "items": { "$ref": "#definitions/process" }
        },
        "dataSets": {
            "type": "object",
            "patternProperties": {
                ".*": { "$ref": "#definitions/dataSet" }
            }
        },
        "additionalProperties": true
    },
    "definitions": {
        "address": {
            "type": "object",
            "properties": {
                "hostname": {
                    "type": "string",
                    "format": "host-name"
                },
                "ipv4": {
                    "type": "string",
                    "format": "ipv4"
                },
                "ipv6": {
                    "type": "string",
                    "format": "ipv6"
                }
            }
            "anyOf": [
                { "required": [ "hostname" ] },
                { "required": [ "ipv4" ] },
                { "required": [ "ipv6" ] }
            ]
        }
        "process": {},
        "logicState": {},
        "dataSet": {}
    }
}
